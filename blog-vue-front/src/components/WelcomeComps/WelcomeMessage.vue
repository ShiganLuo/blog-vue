<script setup lang="ts">
import { ElMessage } from 'element-plus'
import { getVisitorLocation,calculateDistance } from '@/utils/tool'
import { SERVER_LOCATION } from '@/config/config'
import { onMounted } from 'vue'

onMounted(async () => {
  const location = await getVisitorLocation()
  if (location) {
    const distance = calculateDistance(
      location.latitude,
      location.longitude,
      SERVER_LOCATION.latitude,
      SERVER_LOCATION.longitude
    )
    
    ElMessage.success({
      message: `ğŸ‘‹ æ¬¢è¿æ¥è‡ª ${location.city}, ${location.country} çš„ç”¨æˆ·ï¼\næˆ‘ä»¬ä¹‹é—´ç›¸è·çº¦ ${Math.round(distance)} å…¬é‡Œã€‚`,
      duration: 6000, // 6ç§’åå…³é—­
      showClose: true, // æ˜¾ç¤ºå…³é—­æŒ‰é’®
    })
  } else {
    ElMessage.info('æ¬¢è¿è®¿é—®ï¼')
  }
})
</script>

<template>
</template>